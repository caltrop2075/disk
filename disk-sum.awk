#!/usr/bin/awk -f
#------------------------------------------------------------------------------#
#                            Programmed By Liz                                 #
#------------------------------------------------------------------------------#
# disk usage summary
#===============================================================================
BEGIN {
   FS="|"
   w=15        # drive column width
   z=65-w+37   # bar magnitude, 80 col, +37 for 117 col
   printf("%s %-"w"s\n",fx_hr(t),d)
}
#===============================================================================
{
   p=$1/t
   printf("%s %3.f%% %-"w"s ",fx_hr($1),p*100,$2)
   q=int(z*p+.5)
   for(i=0;i<q;i++)
      printf("|")
   q=int(z*(1-p)+.5)
   for(i=0;i<q;i++)
      printf("â€§")
   printf("\n")
}
#===============================================================================
END {
}
#===============================================================================
# functions
#-------------------------------------------------------------------------------
function fx_hr(fx)
{
   fq=int(int(log(fx)/log(10))/3)*3
   fy=fx/10^fq
   switch(fq)
   {
      case 12 :
         fs="T"
         break
      case 9 :
         fs="G"
         break
      case 6 :
         fs="M"
         break
      case 3 :
         fs="K"
         break
      case 0 :
         fs=""
         break
   }
   return sprintf("%7.3f%s",fy,fs)
}
#===============================================================================
